# Playlist Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏ –≤ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö –∏ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç—ã.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP REST API –¥–ª—è:
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö
- –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–∞—Ö —Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Go 1.23+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **Gin** - HTTP –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **HTTP REST API** - –¥–ª—è API Gateway

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.23+
- PostgreSQL 15+
- Docker –∏ Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL —á–µ—Ä–µ–∑ docker-compose
docker-compose up -d postgres

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î
export DATABASE_URL=postgres://user:password@localhost:5432/playlists_db?sslmode=disable
```

2. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**

```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ migrations/001_init.sql
# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–∏–≥—Ä–∞—Ü–∏–π
psql $DATABASE_URL -f migrations/001_init.sql
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```bash
go mod download
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:**

```bash
# –ß–µ—Ä–µ–∑ Makefile
make run

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
go run cmd/main.go
```

### Docker

```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make docker-up

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker-compose up --build
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
services/playlist/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ models.go            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ repository.go        # –°–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ service.go           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ handlers.go          # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (Gin)
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 001_init.sql         # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îî‚îÄ‚îÄ utils.go             # –£—Ç–∏–ª–∏—Ç—ã (middleware)
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Makefile                 # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ go.mod                   # Go –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –ë–î

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
playlists (
    id UUID PRIMARY KEY,
    author_id UUID NOT NULL,
    name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()
)

-- –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–ª–µ–π–ª–∏—Å—Ç -> —Ç—Ä–µ–∫–∏
playlist_tracks (
    playlist_id UUID NOT NULL,
    track_id UUID NOT NULL,
    position INTEGER DEFAULT 0,
    added_at TIMESTAMP NOT NULL DEFAULT NOW(),
    PRIMARY KEY (playlist_id, track_id),
    FOREIGN KEY (playlist_id) REFERENCES playlists(id) ON DELETE CASCADE
)

-- –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -> –ø–ª–µ–π–ª–∏—Å—Ç (–ø–æ–¥–ø–∏—Å–∫–∏)
playlist_users (
    user_id UUID NOT NULL,
    playlist_id UUID NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    PRIMARY KEY (user_id, playlist_id),
    FOREIGN KEY (playlist_id) REFERENCES playlists(id) ON DELETE CASCADE
)
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `migrations/001_init.sql`. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏—Ö –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–∞.

## üîå API

### –ü–ª–µ–π–ª–∏—Å—Ç—ã

#### –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–µ–∫–∏.

```http
POST /api/playlists
Content-Type: application/json

{
  "author_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "My Favorite Songs",
  "track_ids": [
    "550e8400-e29b-41d4-a716-446655440001",
    "550e8400-e29b-41d4-a716-446655440002"
  ]
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440003",
  "author_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "My Favorite Songs",
  "tracks": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "title": "Song 1",
      "position": 0
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "title": "Song 2",
      "position": 1
    }
  ],
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

#### –£–¥–∞–ª–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç

```http
DELETE /api/playlists/{id}
```

**–û—Ç–≤–µ—Ç (204 No Content)**

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–∫–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –≤–∫–ª—é—á–∞—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏ –∞–≤—Ç–æ—Ä–∞.

```http
GET /api/playlists/{id}/tracks
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "playlist_id": "550e8400-e29b-41d4-a716-446655440003",
  "tracks": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "title": "Song Title",
      "genre": "Pop",
      "audio_url": "https://cdn.example.com/audio/song.mp3",
      "cover_url": "https://cdn.example.com/covers/song.jpg",
      "duration_seconds": 240,
      "status": "ready",
      "artists": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440010",
          "name": "Artist Name"
        }
      ],
      "author_id": "550e8400-e29b-41d4-a716-446655440000",
      "author_name": "User Name",
      "position": 0,
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞

```http
GET /api/playlists/{id}/author
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "playlist_id": "550e8400-e29b-41d4-a716-446655440003",
  "author_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

#### –£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞

```http
DELETE /api/playlists/{id}/tracks/{track_id}
```

**–û—Ç–≤–µ—Ç (204 No Content)**

### –ü–ª–µ–π–ª–∏—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

```http
GET /api/users/{user_id}/playlists?limit=20&offset=0
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å–∏–º—É–º 100)
- `offset` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "playlists": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440003",
      "author_id": "550e8400-e29b-41d4-a716-446655440000",
      "name": "My Favorite Songs",
      "tracks": [],
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  ],
  "limit": 20,
  "offset": 0
}
```

#### –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç

```http
POST /api/users/{user_id}/playlists/{playlist_id}/subscribe
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "status": "subscribed"
}
```

#### –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞

```http
DELETE /api/users/{user_id}/playlists/{playlist_id}/subscribe
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "status": "unsubscribed"
}
```

### Health Check

```http
GET /health
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "status": "ok"
}
```

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Playlist

```go
type Playlist struct {
    ID        uuid.UUID       `json:"id"`
    AuthorID  uuid.UUID       `json:"author_id"`
    Name      string          `json:"name"`
    Tracks    []PlaylistTrack `json:"tracks,omitempty"`
    CreatedAt time.Time       `json:"created_at"`
    UpdatedAt time.Time       `json:"updated_at"`
}
```

### PlaylistTrack

```go
type PlaylistTrack struct {
    Track      
    Position   int       `json:"position"`
}
```

`PlaylistTrack` –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –∏–∑ –º–æ–¥–µ–ª–∏ `Track` (id, title, genre, audio_url, cover_url, duration_seconds, status, artists, created_at, updated_at) –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ tracks.

## üõ†Ô∏è Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
make build        # –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make run          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
make docker-build  # –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑
make docker-up    # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ docker-compose
make docker-down   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|--------------|
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | `postgres://postgres:postgres@localhost:5432/playlists_db?sslmode=disable` |
| `PORT` | –ü–æ—Ä—Ç HTTP —Å–µ—Ä–≤–µ—Ä–∞ | `8080` |


### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è `ON DELETE CASCADE`

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏

- –¢—Ä–µ–∫–∏ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ –∏–º–µ—é—Ç –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤—Å–µ —Å–≤—è–∑–∏ —Å —Ç—Ä–µ–∫–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- –ú–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ `DATABASE_URL` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞:
```bash
docker-compose up -d postgres
# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql $DATABASE_URL -c "SELECT 1"
```

### –û—à–∏–±–∫–∞: "relation tracks does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `tracks` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–º tracks –∏–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –æ–±—â—É—é —Å—Ö–µ–º—É –ë–î.

### –û—à–∏–±–∫–∞: "column tracks.author_id does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `tracks` –µ—Å—Ç—å –ø–æ–ª–µ `author_id`. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –º–∏–≥—Ä–∞—Ü–∏—é tracks —Å–µ—Ä–≤–∏—Å–∞:
```sql
ALTER TABLE tracks ADD COLUMN author_id UUID;
```

### –û—à–∏–±–∫–∞: "relation users does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `users` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–º users –∏–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –æ–±—â—É—é —Å—Ö–µ–º—É –ë–î.

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–°–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
- `tracks` - –∏–∑ tracks —Å–µ—Ä–≤–∏—Å–∞
- `artists` - –∏–∑ tracks —Å–µ—Ä–≤–∏—Å–∞
- `track_artists` - –∏–∑ tracks —Å–µ—Ä–≤–∏—Å–∞
- `users` - –∏–∑ users —Å–µ—Ä–≤–∏—Å–∞

–í—Å–µ —ç—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ç–æ–π –∂–µ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —á–µ—Ä–µ–∑ –æ–±—â—É—é —Å—Ö–µ–º—É.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **Gin** –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è graceful shutdown –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ SIGINT/SIGTERM
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ middleware
